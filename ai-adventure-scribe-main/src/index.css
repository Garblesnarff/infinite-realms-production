@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=DM+Serif+Display:wght@400;700&family=DM+Sans:wght@400;500;700&display=swap');

/* Infinite Realms Component Library - Fantasy-Tech Fusion Design System */
@import url('./styles/infinite-realms-components.css');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* InfiniteRealms Enhanced Color System */
:root {
  /* Light theme (default) */
  --background: #ffffff;
  --foreground: #0f0c1f;
  --foreground-secondary: rgba(15, 12, 31, 0.9);
  --foreground-muted: rgba(15, 12, 31, 0.7);

  --muted: rgba(15, 12, 31, 0.08);
  --muted-foreground: rgba(15, 12, 31, 0.7);
  --muted-hover: rgba(15, 12, 31, 0.12);

  --border: rgba(15, 12, 31, 0.15);
  --border-hover: rgba(15, 12, 31, 0.25);
  --input: rgba(15, 12, 31, 0.06);
  --input-hover: rgba(15, 12, 31, 0.1);

  --card: rgba(255, 255, 255, 0.95);
  --card-hover: rgba(255, 255, 255, 0.98);
  --card-foreground: #0f0c1f;
  --card-border: rgba(15, 12, 31, 0.1);

  --popover: #ffffff;
  --popover-foreground: #0f0c1f;
  /* Enhanced Brand Colors with Multiple Shades */
  --infinite-purple: #7c3aed;
  --infinite-purple-light: #a855f7;
  --infinite-purple-dark: #5b21b6;
  --infinite-purple-darker: #4c1d95;

  --infinite-gold: #f59e0b;
  --infinite-gold-light: #fcd34d;
  --infinite-gold-dark: #d97706;
  --infinite-gold-darker: #b45309;

  --infinite-teal: #0891b2;
  --infinite-teal-light: #22d3ee;
  --infinite-teal-dark: #0e7490;
  --infinite-teal-darker: #155e75;

  --infinite-dark: #0f0c1f;
  --infinite-dark-light: #1e1b4b;
  --infinite-dark-lighter: #2d2a5f;
  --infinite-surface: #1a1627;

  /* Atmospheric Gradients */
  --gradient-cosmic: linear-gradient(
    135deg,
    var(--infinite-dark) 0%,
    var(--infinite-purple-darker) 50%,
    var(--infinite-dark-light) 100%
  );
  --gradient-mystical: linear-gradient(
    135deg,
    var(--infinite-purple-dark) 0%,
    var(--infinite-teal-dark) 100%
  );
  --gradient-enchanted: linear-gradient(
    135deg,
    var(--infinite-gold-dark) 0%,
    var(--infinite-purple) 100%
  );
  --gradient-ethereal: linear-gradient(
    135deg,
    rgba(124, 58, 237, 0.1) 0%,
    rgba(8, 145, 178, 0.1) 100%
  );

  /* Primary Colors */
  --primary: var(--infinite-purple);
  --primary-foreground: #ffffff;

  /* Secondary Colors */
  --secondary: var(--infinite-gold);
  --secondary-foreground: var(--infinite-dark);

  /* Accent Colors */
  --accent: var(--infinite-teal);
  --accent-foreground: #ffffff;

  --ring: var(--infinite-purple-light);

  /* Status Colors */
  --destructive: #ef4444;
  --destructive-foreground: #ffffff;
  --success: #10b981;
  --success-foreground: #ffffff;
  --warning: var(--infinite-gold);
  --warning-foreground: var(--infinite-dark);
  --info: var(--infinite-teal);
  --info-foreground: #ffffff;

  /* Unified Color System - Brand Utilities */
  /* Status utilities */
  --text-success: #10b981;
  --bg-success: rgba(16, 185, 129, 0.1);
  --border-success: rgba(16, 185, 129, 0.2);

  --text-error: #ef4444;
  --bg-error: rgba(239, 68, 68, 0.1);
  --border-error: rgba(239, 68, 68, 0.2);

  --text-warning: var(--infinite-gold);
  --bg-warning: rgba(245, 158, 11, 0.1);
  --border-warning: rgba(245, 158, 11, 0.2);

  --text-info: var(--infinite-teal);
  --bg-info: rgba(8, 145, 178, 0.1);
  --border-info: rgba(8, 145, 178, 0.2);

  /* Brand utilities */
  --text-brand-primary: var(--infinite-purple);
  --bg-brand-primary: rgba(124, 58, 237, 0.1);
  --border-brand-primary: rgba(124, 58, 237, 0.2);

  --text-brand-secondary: var(--infinite-gold);
  --bg-brand-secondary: rgba(245, 158, 11, 0.1);
  --border-brand-secondary: rgba(245, 158, 11, 0.2);

  --text-brand-accent: var(--infinite-teal);
  --bg-brand-accent: rgba(8, 145, 178, 0.1);
  --border-brand-accent: rgba(8, 145, 178, 0.2);

  @layer components {
    /* Status Badge Components */
    .badge-success {
      @apply bg-success/20 text-success border-success/30;
    }

    .badge-error {
      @apply bg-error/20 text-error border-error/30;
    }

    .badge-warning {
      @apply bg-warning/20 text-warning border-warning/30;
    }

    .badge-info {
      @apply bg-info/20 text-info border-info/30;
    }

    /* Brand Badge Components */
    .badge-brand-primary {
      @apply bg-brand-primary/20 text-brand-primary border-brand-primary/30;
    }

    .badge-brand-secondary {
      @apply bg-brand-secondary/20 text-brand-secondary border-brand-secondary/30;
    }

    .badge-brand-accent {
      @apply bg-brand-accent/20 text-brand-accent border-brand-accent/30;
    }

    /* Text Status Classes */
    .text-status-success {
      @apply text-success;
    }
    .text-status-error {
      @apply text-error;
    }
    .text-status-warning {
      @apply text-warning;
    }
    .text-status-info {
      @apply text-info;
    }

    /* Background Status Classes */
    .bg-status-success {
      @apply bg-success;
    }
    .bg-status-error {
      @apply bg-error;
    }
    .bg-status-warning {
      @apply bg-warning;
    }
    .bg-status-info {
      @apply bg-info;
    }

    /* Border Status Classes */
    .border-status-success {
      @apply border-success;
    }
    .border-status-error {
      @apply border-error;
    }
    .border-status-warning {
      @apply border-warning;
    }
    .border-status-info {
      @apply border-info;
    }

    /* Combined Status Classes */
    .status-success {
      @apply bg-success/10 text-success border-success/20;
    }
    .status-error {
      @apply bg-error/10 text-error border-error/20;
    }
    .status-warning {
      @apply bg-warning/10 text-warning border-warning/20;
    }
    .status-info {
      @apply bg-info/10 text-info border-info/20;
    }

    /* Brand Background Classes */
    .brand-bg-primary {
      @apply bg-brand-primary;
    }
    .brand-bg-secondary {
      @apply bg-brand-secondary;
    }
    .brand-bg-accent {
      @apply bg-brand-accent;
    }
  }

  @layer utilities {
    .text-success {
      color: var(--text-success);
    }
    .text-error {
      color: var(--text-error);
    }
    .text-warning {
      color: var(--text-warning);
    }
    .text-info {
      color: var(--text-info);
    }

    .bg-success {
      background-color: var(--bg-success);
    }
    .bg-error {
      background-color: var(--bg-error);
    }
    .bg-warning {
      background-color: var(--bg-warning);
    }
    .bg-info {
      background-color: var(--bg-info);
    }

    .border-success {
      border-color: var(--border-success);
    }
    .border-error {
      border-color: var(--border-error);
    }
    .border-warning {
      border-color: var(--border-warning);
    }
    .border-info {
      border-color: var(--border-info);
    }

    .text-brand-primary {
      color: var(--text-brand-primary);
    }
    .bg-brand-primary {
      background-color: var(--bg-brand-primary);
    }
    .border-brand-primary {
      border-color: var(--border-brand-primary);
    }

    .text-brand-secondary {
      color: var(--text-brand-secondary);
    }
    .bg-brand-secondary {
      background-color: var(--bg-brand-secondary);
    }
    .border-brand-secondary {
      border-color: var(--border-brand-secondary);
    }

    .text-brand-accent {
      color: var(--text-brand-accent);
    }
    .bg-brand-accent {
      background-color: var(--bg-brand-accent);
    }
    .border-brand-accent {
      border-color: var(--border-brand-accent);
    }
  }

  /* Sidebar (light theme) */
  --sidebar-background: rgba(15, 12, 31, 0.03);
  --sidebar-foreground: #0f0c1f;
  --sidebar-primary: var(--infinite-purple);
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: var(--infinite-teal);
  --sidebar-accent-foreground: #ffffff;
  --sidebar-border: rgba(15, 12, 31, 0.15);
  --sidebar-ring: var(--infinite-purple-light);

  /* Enhanced Shadows */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
  --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.6), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
  --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.7);

  /* Border Radius */
  --radius: 0.75rem;
  --radius-sm: 0.5rem;
  --radius-lg: 1rem;
}

/* Dark theme */
.dark,
[data-theme='dark'] {
  /* Dark theme backgrounds and text */
  --background: var(--infinite-dark);
  --foreground: #ffffff;
  --foreground-secondary: rgba(255, 255, 255, 0.9);
  --foreground-muted: rgba(255, 255, 255, 0.7);

  --muted: rgba(255, 255, 255, 0.12);
  --muted-foreground: rgba(255, 255, 255, 0.7);
  --muted-hover: rgba(255, 255, 255, 0.18);

  --border: rgba(255, 255, 255, 0.15);
  --border-hover: rgba(255, 255, 255, 0.25);
  --input: rgba(255, 255, 255, 0.08);
  --input-hover: rgba(255, 255, 255, 0.12);

  --card: rgba(255, 255, 255, 0.06);
  --card-hover: rgba(255, 255, 255, 0.09);
  --card-foreground: #ffffff;
  --card-border: rgba(255, 255, 255, 0.1);

  --popover: var(--infinite-surface);
  --popover-foreground: #ffffff;

  /* Dark sidebar */
  --sidebar-background: var(--infinite-surface);
  --sidebar-foreground: #ffffff;
  --sidebar-border: rgba(255, 255, 255, 0.15);
}

/* Automatically use dark theme based on system preference */
@media (prefers-color-scheme: dark) {
  :root {
    --background: var(--infinite-dark);
    --foreground: #ffffff;
    --foreground-secondary: rgba(255, 255, 255, 0.9);
    --foreground-muted: rgba(255, 255, 255, 0.7);

    --muted: rgba(255, 255, 255, 0.12);
    --muted-foreground: rgba(255, 255, 255, 0.7);
    --muted-hover: rgba(255, 255, 255, 0.18);

    --border: rgba(255, 255, 255, 0.15);
    --border-hover: rgba(255, 255, 255, 0.25);
    --input: rgba(255, 255, 255, 0.08);
    --input-hover: rgba(255, 255, 255, 0.12);

    --card: rgba(255, 255, 255, 0.06);
    --card-hover: rgba(255, 255, 255, 0.09);
    --card-foreground: #ffffff;
    --card-border: rgba(255, 255, 255, 0.1);

    --popover: var(--infinite-surface);
    --popover-foreground: #ffffff;

    --sidebar-background: var(--infinite-surface);
    --sidebar-foreground: #ffffff;
    --sidebar-border: rgba(255, 255, 255, 0.15);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
    font-family:
      'Inter',
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      sans-serif;
    line-height: 1.6;
    font-size: 18px; /* Increased from 16px base for better readability */
  }

  /* Enhanced Typography System */
  .font-display {
    font-family: 'DM Serif Display', Georgia, serif;
  }

  .font-ui {
    font-family: 'DM Sans', 'Inter', sans-serif;
  }

  /* 8px Grid System */
  .space-grid-1 {
    @apply space-y-2;
  }
  .space-grid-2 {
    @apply space-y-4;
  }
  .space-grid-3 {
    @apply space-y-6;
  }
  .space-grid-4 {
    @apply space-y-8;
  }
  .space-grid-5 {
    @apply space-y-10;
  }
  .space-grid-6 {
    @apply space-y-12;
  }

  .gap-grid-1 {
    @apply gap-2;
  }
  .gap-grid-2 {
    @apply gap-4;
  }
  .gap-grid-3 {
    @apply gap-6;
  }
  .gap-grid-4 {
    @apply gap-8;
  }
  .gap-grid-5 {
    @apply gap-10;
  }
  .gap-grid-6 {
    @apply gap-12;
  }

  .p-grid-1 {
    @apply p-2;
  }
  .p-grid-2 {
    @apply p-4;
  }
  .p-grid-3 {
    @apply p-6;
  }
  .p-grid-4 {
    @apply p-8;
  }
  .p-grid-5 {
    @apply p-10;
  }
  .p-grid-6 {
    @apply p-12;
  }

  .m-grid-1 {
    @apply m-2;
  }
  .m-grid-2 {
    @apply m-4;
  }
  .m-grid-3 {
    @apply m-6;
  }
  .m-grid-4 {
    @apply m-8;
  }
  .m-grid-5 {
    @apply m-10;
  }
  .m-grid-6 {
    @apply m-12;
  }

  h1 {
    @apply text-3xl font-bold tracking-tight leading-tight;
    font-family:
      'Cinzel', 'DM Serif Display', Georgia, serif; /* Updated to use Cinzel for fantasy accent */
    letter-spacing: -0.025em;
  }

  h2 {
    @apply text-2xl font-semibold tracking-tight leading-snug;
    font-family:
      'Cinzel', 'DM Serif Display', Georgia, serif; /* Updated to use Cinzel for major headings */
    letter-spacing: -0.02em;
  }

  h3 {
    @apply text-xl font-semibold tracking-tight leading-normal;
    font-family: 'DM Sans', sans-serif;
    letter-spacing: -0.015em;
  }

  h4 {
    @apply text-lg font-medium leading-relaxed;
    font-family: 'DM Sans', sans-serif;
    letter-spacing: -0.01em;
  }

  h5 {
    @apply text-base font-medium leading-relaxed;
    font-family: 'DM Sans', sans-serif;
  }

  p {
    @apply text-base leading-relaxed;
    font-family: 'Inter', sans-serif;
  }

  /* High contrast for accessibility - responsive to theme */
  .text-muted-foreground {
    color: hsl(var(--muted-foreground)) !important;
  }

  /* RPG-specific text styles */
  .text-realm-title {
    @apply text-4xl font-bold tracking-tight;
    font-family: 'DM Serif Display', Georgia, serif;
    letter-spacing: -0.03em;
    background: linear-gradient(135deg, var(--infinite-purple), var(--infinite-gold));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .text-character-name {
    @apply text-xl font-semibold;
    font-family: 'DM Sans', sans-serif;
    letter-spacing: -0.015em;
  }

  .text-narrative {
    @apply text-base leading-relaxed;
    font-family: 'Inter', sans-serif;
    line-height: 1.7;
  }

  .text-ui-label {
    @apply text-sm font-medium;
    font-family: 'DM Sans', sans-serif;
    letter-spacing: 0.01em;
  }

  a {
    @apply text-primary hover:text-primary/80 transition-all duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-ring rounded;
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
    text-underline-offset: 4px;
    text-decoration-thickness: 2px;
    text-decoration-color: var(--infinite-gold);
  }

  button {
    @apply transition-all duration-200 ease-in-out focus-visible:outline focus-visible:outline-2 focus-visible:outline-ring;
    border-radius: var(--radius);
  }

  /* Enhanced Interactive States */
  .hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
  }

  .hover-glow:hover {
    box-shadow:
      0 0 20px rgba(124, 58, 237, 0.3),
      var(--shadow-md);
  }

  .focus-glow:focus-visible {
    box-shadow:
      0 0 0 3px rgba(124, 58, 237, 0.3),
      var(--shadow);
  }

  /* Atmospheric Background Classes */
  .bg-cosmic {
    background: var(--gradient-cosmic);
  }

  .bg-mystical {
    background: var(--gradient-mystical);
  }

  .bg-enchanted {
    background: var(--gradient-enchanted);
  }

  .bg-ethereal {
    background: var(--gradient-ethereal);
  }

  /* Glass Morphism Effects - Theme Aware */
  .glass {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .glass-strong {
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.3);
  }

  /* Dark theme glass morphism */
  .dark .glass {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .dark .glass-strong {
    background: rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.15);
  }

  /* Responsive Layout Utilities */
  .layout-main {
    min-width: 0; /* Prevent flex/grid overflow */
    overflow: hidden;
  }

  .layout-sidebar {
    min-width: 280px;
    max-width: 450px;
    width: 100%;
  }

  @media (max-width: 768px) {
    .layout-sidebar {
      min-width: 100%;
      max-width: 100%;
    }
  }

  /* Responsive Typography Scale */
  .text-responsive-sm {
    @apply text-sm;
  }

  .text-responsive-base {
    @apply text-sm md:text-base;
  }

  .text-responsive-lg {
    @apply text-base md:text-lg;
  }

  .text-responsive-xl {
    @apply text-lg md:text-xl;
  }

  .text-responsive-2xl {
    @apply text-xl md:text-2xl;
  }

  /* Compact Spacing for Dense Information */
  .space-compact-1 {
    @apply space-y-1;
  }
  .space-compact-2 {
    @apply space-y-2;
  }
  .space-compact-3 {
    @apply space-y-3;
  }

  .gap-compact-1 {
    @apply gap-1;
  }
  .gap-compact-2 {
    @apply gap-2;
  }
  .gap-compact-3 {
    @apply gap-3;
  }

  /* Mobile-First Responsive Containers */
  .container-game {
    @apply w-full max-w-none;
  }

  @media (min-width: 640px) {
    .container-game {
      max-width: 100%;
      padding: 0 1rem;
    }
  }

  @media (min-width: 1024px) {
    .container-game {
      max-width: 100rem;
      padding: 0 1.5rem;
    }
  }

  /* Sidebar Responsive Behavior */
  .sidebar-responsive {
    @apply w-full;
  }

  @media (min-width: 768px) {
    .sidebar-responsive {
      width: clamp(280px, 25vw, 350px);
    }
  }

  @media (min-width: 1024px) {
    .sidebar-responsive {
      width: clamp(300px, 27vw, 400px);
    }
  }

  @media (min-width: 1280px) {
    .sidebar-responsive {
      width: clamp(320px, 25vw, 420px);
    }
  }

  @media (min-width: 1536px) {
    .sidebar-responsive {
      width: clamp(350px, 23vw, 450px);
    }
  }

  /* Mobile-First Touch Optimizations */
  @media (max-width: 768px) {
    /* Larger touch targets for mobile */
    button {
      min-height: 44px;
      min-width: 44px;
    }

    /* Better spacing for mobile */
    .mobile-spacing {
      @apply p-4 gap-4;
    }

    /* Mobile typography adjustments */
    .mobile-text {
      @apply text-base leading-relaxed;
    }

    /* Mobile-friendly input areas */
    input,
    textarea {
      font-size: 16px; /* Prevents zoom on iOS */
      padding: 12px;
    }

    /* Mobile scrolling optimizations */
    .mobile-scroll {
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
    }

    /* Mobile-safe bottom spacing */
    .mobile-bottom-safe {
      padding-bottom: env(safe-area-inset-bottom, 1rem);
    }

    /* Mobile chat optimizations */
    .mobile-chat {
      height: calc(100vh - env(safe-area-inset-top, 0) - env(safe-area-inset-bottom, 0) - 4rem);
    }
  }

  /* Tablet optimizations */
  @media (min-width: 768px) and (max-width: 1024px) {
    .tablet-layout {
      display: grid;
      grid-template-columns: 1fr 300px;
      gap: 1rem;
    }

    .tablet-sidebar {
      width: 300px;
      min-width: 300px;
    }
  }

  /* High DPI and retina display optimizations */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .retina-border {
      border-width: 0.5px;
    }

    .retina-text {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .motion-safe {
      animation: none !important;
      transition: none !important;
    }

    .motion-safe * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Dark mode optimizations */
  @media (prefers-color-scheme: dark) {
    .dark-optimized {
      color-scheme: dark;
    }
  }

  /* Enhanced focus states for accessibility */
  .focus-enhanced:focus-visible {
    outline: 2px solid var(--infinite-gold);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.2);
  }

  .container {
    @apply mx-auto px-4;
  }

  /* Prose class for rich text content (AI-generated narratives, descriptions) */
  .prose {
    @apply text-base leading-relaxed max-w-none;
    color: var(--foreground);
  }

  .prose h1,
  .prose h2,
  .prose h3,
  .prose h4 {
    @apply font-serif tracking-tight mb-4;
  }

  .prose p {
    @apply mb-4;
  }

  .prose strong {
    @apply font-semibold;
  }

  .prose em {
    @apply italic;
  }

  .prose ul,
  .prose ol {
    @apply mb-4 pl-6;
  }

  .prose li {
    @apply mb-1;
  }

  /* Text handling utilities */
  .break-words {
    word-break: break-word;
    overflow-wrap: break-word;
  }

  .text-overflow {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .hyphens-auto {
    hyphens: auto;
  }

  /* Accessibility: Respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-snap-type: none !important;
    }
  }

  /* Chat-specific animations */
  .message-enter {
    opacity: 0;
    transform: translateY(10px);
    animation: messageSlideIn 0.3s ease-out forwards;
  }

  .message-bubble:hover {
    transform: translateY(-1px);
  }

  @keyframes messageSlideIn {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Smooth scrolling for chat */
  .chat-scroll {
    scroll-behavior: smooth;
  }

  /* Typing indicator animation */
  .typing-dot {
    animation: typingBounce 1.4s infinite ease-in-out;
  }

  .typing-dot:nth-child(1) {
    animation-delay: -0.32s;
  }

  .typing-dot:nth-child(2) {
    animation-delay: -0.16s;
  }

  @keyframes typingBounce {
    0%,
    80%,
    100% {
      transform: scale(0.8);
      opacity: 0.5;
    }
    40% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Subtle glow effect for active elements */
  .active-glow {
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.15);
  }

  /* Landing page specific animations */
  @keyframes float {
    0%,
    100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-20px);
    }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  .animate-fade-in-up {
    animation: fadeInUp 0.8s ease-out forwards;
  }

  .animate-scale-in {
    animation: scaleIn 0.6s ease-out forwards;
  }

  .animate-shimmer {
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }

  /* Parchment / DM theme */
  .parchment {
    background-image: linear-gradient(180deg, rgba(255, 248, 236, 0.95), rgba(250, 244, 230, 0.95));
    background-size: cover;
    color: #2b2b20;
    background-blend-mode: multiply;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
  }

  /* Campaign card visuals */
  .campaign-card {
    background: linear-gradient(180deg, rgba(255, 255, 250, 0.9), rgba(250, 244, 230, 0.85));
    border-radius: 12px;
    border: 1px solid rgba(40, 32, 24, 0.06);
    overflow: hidden;
  }

  .campaign-hero {
    background: linear-gradient(90deg, rgba(255, 252, 245, 0.6), rgba(255, 250, 240, 0.4));
    padding: 16px;
    align-items: center;
  }

  /* featured hero uses public card background image */
  .campaign-card.featured-card {
    border: 0;
    background: transparent;
    box-shadow: none;
  }

  .campaign-hero.featured {
    background-image: url('/card-background.jpeg');
    background-size: cover;
    background-position: center center;
    position: absolute;
    inset: 0;
    z-index: 1;
  }

  /* make sure the hero is the full card background for featured cards */
  .campaign-card.featured-card .campaign-hero {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    height: 100%;
    width: 100%;
  }

  .campaign-card.featured-card {
    background: transparent;
  }

  /* dark overlay to help text legibility, caption sits on white box overlapping the image */
  .campaign-hero.featured::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, rgba(0, 0, 0, 0.18), rgba(0, 0, 0, 0.28));
    mix-blend-mode: multiply;
  }

  .featured-caption {
    z-index: 5;
  }

  /* featured overlay and popup */
  .campaign-hero.featured .featured-overlay {
    position: absolute;
    inset: 0;
    z-index: 2;
    pointer-events: none;
    background: linear-gradient(180deg, rgba(0, 0, 0, 0.08), rgba(0, 0, 0, 0.18));
  }

  .campaign-card {
    position: relative;
  }

  /* Removed to allow JS-controlled 1-second hover delay */
  /* .campaign-card:hover .campaign-hero.featured .hover-popup {
    opacity: 1;
    transform: translate(-50%, -50%);
    pointer-events: auto;
    z-index: 12;
  } */

  /* center the popup within the image area */
  .hover-popup {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -12%);
    width: 320px;
    z-index: 10;
    transition:
      opacity 0.18s ease,
      transform 0.18s ease;
  }

  /* hide the lower action area for featured cards by collapsing padding/space */
  .campaign-card.featured-card > .px-6 {
    display: none;
  }

  .campaign-thumb .avatar-dm {
    width: 56px;
    height: 56px;
    font-size: 1rem;
    border-radius: 8px;
  }

  .campaign-badges .badge {
    background: rgba(255, 255, 255, 0.6);
    padding: 6px 10px;
    border-radius: 999px;
    border: 1px solid rgba(40, 32, 24, 0.04);
    color: #2b2b20;
  }

  .campaign-badges .badge.genre {
    background: rgba(107, 70, 193, 0.08);
    color: var(--infinite-purple);
  }

  .campaign-badges .badge.difficulty {
    background: rgba(8, 145, 178, 0.06);
    color: var(--infinite-teal);
  }

  .campaign-badges .badge.length {
    background: rgba(245, 158, 11, 0.06);
    color: var(--infinite-gold);
  }

  .campaign-badges .badge.tone {
    background: rgba(59, 130, 246, 0.06);
    color: #3b82f6;
  }

  .parchment-panel {
    background: linear-gradient(180deg, rgba(255, 255, 250, 0.82), rgba(250, 244, 230, 0.7));
    border: 1px solid rgba(40, 32, 24, 0.08);
    box-shadow: 0 6px 24px rgba(16, 12, 8, 0.45);
    border-radius: 14px;
  }

  /* Chat specific theme tweaks */
  .dm-bubble {
    background: linear-gradient(135deg, rgba(45, 17, 85, 0.92), rgba(15, 41, 69, 0.88));
    color: rgba(255, 255, 255, 0.92);
    border: 1px solid rgba(124, 58, 237, 0.25);
    box-shadow:
      0 25px 45px rgba(8, 8, 32, 0.45),
      inset 0 1px 0 rgba(255, 255, 255, 0.12);
  }

  .dm-bubble:hover {
    border-color: rgba(34, 211, 238, 0.4);
    box-shadow:
      0 28px 52px rgba(12, 18, 46, 0.52),
      inset 0 1px 0 rgba(255, 255, 255, 0.18);
  }

  .dm-narrative {
    font-family: 'Inter', ui-sans-serif, system-ui;
  }

  .dm-dialogue {
    font-family: 'DM Serif Display', 'Cinzel', serif;
    font-size: 1.05em;
    letter-spacing: 0.01em;
  }

  .dm-list {
    font-family: 'Inter', ui-sans-serif, system-ui;
  }

  .clamp-fade {
    position: relative;
  }

  .clamp-fade::after {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    height: 90px;
    background: linear-gradient(to bottom, rgba(17, 16, 32, 0), rgba(11, 23, 41, 0.9));
    pointer-events: none;
  }

  /* Dark mode override for DM bubble */
  @media (prefers-color-scheme: dark) {
    .dm-bubble {
      background: linear-gradient(135deg, rgba(35, 18, 58, 0.94), rgba(9, 30, 52, 0.9));
      color: rgba(255, 255, 255, 0.95);
      border: 1px solid rgba(124, 58, 237, 0.3);
      box-shadow:
        0 24px 52px rgba(4, 8, 24, 0.6),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }
  }

  .player-bubble {
    background: linear-gradient(180deg, #efe9ff, #e7ddff);
    color: #1f1140;
    border: 1px solid rgba(107, 70, 193, 0.12);
    box-shadow: 0 6px 18px rgba(98, 70, 170, 0.08);
  }

  /* Dark mode override for player bubble */
  @media (prefers-color-scheme: dark) {
    .player-bubble {
      background: linear-gradient(180deg, hsl(var(--muted)), hsl(var(--muted) / 0.8));
      color: hsl(var(--muted-foreground));
      border: 1px solid hsl(var(--border));
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
    }
  }

  .system-bubble {
    background: linear-gradient(180deg, #f3f4f6, #eef2ff);
    color: #374151;
    border: 1px solid rgba(55, 65, 81, 0.06);
  }

  .message-meta {
    font-size: 0.75rem;
    color: rgba(30, 27, 20, 0.45);
  }

  .avatar-dm {
    background: radial-gradient(circle at 30% 20%, #f6e7d6, #e6d1b2);
    border: 1px solid rgba(40, 32, 24, 0.06);
    color: #2b2b20;
    font-weight: 700;
  }

  .avatar-player {
    background: linear-gradient(180deg, #e9e1ff, #d6ccff);
    color: #2b1140;
    border: 1px solid rgba(107, 70, 193, 0.08);
    font-weight: 700;
  }

  /* Message tail handled via pseudo element fallback */
  .message-bubble {
    position: relative;
  }

  .message-bubble::after {
    content: '';
    position: absolute;
    bottom: -6px;
    width: 12px;
    height: 12px;
    transform: rotate(45deg);
    box-shadow: 0 6px 12px rgba(16, 12, 8, 0.06);
  }

  .message-bubble.dm-bubble::after {
    display: none;
  }

  .message-bubble.player-bubble::after {
    right: 18px;
    background: linear-gradient(180deg, #efe9ff, #e7ddff);
    border-right: 1px solid rgba(107, 70, 193, 0.06);
  }

  /* Composer */
  .chat-composer {
    background: linear-gradient(180deg, rgba(255, 252, 244, 0.9), rgba(255, 249, 236, 0.8));
    border: 1px solid rgba(40, 32, 24, 0.06);
    padding: 12px;
    border-radius: 12px;
  }

  /* Subtle paper grain using inline SVG data URI */
  .parchment-panel {
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200' viewBox='0 0 200 200'><filter id='n'><feTurbulence baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/><feColorMatrix type='saturate' values='0'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='0.02' fill='%23bfa98b'/></svg>");
    background-blend-mode: overlay;
    background-repeat: repeat;
  }

  /* Enhanced custom scrollbar with smooth animations and proper hiding */
  .chat-scroll::-webkit-scrollbar {
    width: 0px;
    height: 0px;
  }

  .chat-scroll::-webkit-scrollbar-track {
    background: transparent;
  }

  .chat-scroll::-webkit-scrollbar-thumb {
    background: transparent;
    border: none;
  }

  .chat-scroll::-webkit-scrollbar-thumb:hover {
    background: transparent;
  }

  /* Hide default scrollbar for all browsers while maintaining scroll functionality */
  .chat-scroll {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge */
    scroll-behavior: smooth;
    overscroll-behavior: contain;
    /* Ensure scrolling works properly */
    overflow-y: auto !important;
    height: 100%;
  }

  /* Enhanced scroll animations */
  @keyframes scrollFadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .chat-scroll > * {
    animation: scrollFadeIn 0.3s ease-out;
  }

  /* Enhanced Timeline rail for DM messages */
  .timeline-rail {
    position: absolute;
    right: 12px;
    top: 16px;
    bottom: 16px;
    width: 20px;
    pointer-events: none;
    z-index: 10;
  }
  .timeline-rail .timeline-track {
    position: sticky;
    top: 12px;
    height: calc(100% - 24px);
    width: 100%;
    border-left: 3px solid rgba(124, 58, 237, 0.2);
    border-radius: 2px;
    background: linear-gradient(
      180deg,
      rgba(124, 58, 237, 0.1) 0%,
      rgba(124, 58, 237, 0.05) 50%,
      rgba(124, 58, 237, 0.1) 100%
    );
    background-size: 100% 200%;
    transition: all 0.3s ease;
  }
  /* Animate rail while actively scrolling */
  .timeline-rail[data-scrolling='true'] .timeline-track {
    border-left-color: rgba(245, 158, 11, 0.4);
    animation: railShimmer 0.9s linear infinite;
  }
  @keyframes railShimmer {
    0% {
      background-position-y: 0%;
    }
    100% {
      background-position-y: 100%;
    }
  }
  .timeline-rail .timeline-dot {
    position: absolute;
    left: -7px;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: linear-gradient(135deg, rgba(107, 70, 193, 0.6), rgba(124, 58, 237, 0.8));
    border: 2px solid rgba(255, 255, 255, 0.3);
    box-shadow:
      0 2px 8px rgba(107, 70, 193, 0.3),
      0 1px 3px rgba(0, 0, 0, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
    pointer-events: auto;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }
  .timeline-rail .timeline-dot:hover {
    transform: scale(1.3);
    background: linear-gradient(135deg, rgba(107, 70, 193, 0.8), rgba(124, 58, 237, 1));
    border-color: rgba(255, 255, 255, 0.5);
    box-shadow:
      0 4px 12px rgba(107, 70, 193, 0.4),
      0 2px 6px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }
  .timeline-rail .timeline-dot.active {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    border-color: rgba(245, 158, 11, 0.8);
    box-shadow:
      0 3px 10px rgba(245, 158, 11, 0.4),
      0 1px 4px rgba(0, 0, 0, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.4);
    transform: scale(1.2);
  }
  .timeline-rail .timeline-dot:active {
    transform: scale(1.1);
  }

  /* Scroll position indicator for timeline rail */
  .scroll-position-indicator {
    box-shadow:
      0 2px 8px rgba(245, 158, 11, 0.4),
      0 1px 3px rgba(0, 0, 0, 0.2) !important;
  }
  /* Pulse the indicator while scrolling */
  .timeline-rail .scroll-position-indicator {
    position: relative;
  }
  .timeline-rail .scroll-position-indicator::after {
    content: '';
    position: absolute;
    inset: -2px;
    border-radius: 9999px;
    border: 2px solid rgba(245, 158, 11, 0.6);
    opacity: 0;
  }
  .timeline-rail[data-scrolling='true'] .scroll-position-indicator {
    filter: drop-shadow(0 0 12px rgba(245, 158, 11, 0.55));
  }
  .timeline-rail[data-scrolling='true'] .scroll-position-indicator::after {
    animation: indicatorPulse 0.6s ease-out infinite;
  }
  @keyframes indicatorPulse {
    0% {
      transform: scale(1);
      opacity: 0.6;
    }
    100% {
      transform: scale(1.6);
      opacity: 0;
    }
  }
  /* Slightly emphasize beads while scrolling */
  .timeline-rail[data-scrolling='true'] .timeline-dot {
    box-shadow: 0 3px 10px rgba(124, 58, 237, 0.35);
  }

  /* Bead absorb animation when indicator overlaps */
  .timeline-rail .timeline-dot.absorbing {
    animation: beadAbsorb 0.45s ease-out;
  }
  @keyframes beadAbsorb {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    35% {
      transform: scale(0.8);
      opacity: 0.85;
    }
    70% {
      transform: scale(0.7);
      opacity: 0.65;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Indicator ripple when absorbing a bead */
  .timeline-rail .scroll-position-indicator.absorbing::before {
    content: '';
    position: absolute;
    inset: -3px;
    border-radius: 9999px;
    border: 3px solid rgba(245, 158, 11, 0.65);
    animation: indicatorRipple 0.45s ease-out;
  }
  @keyframes indicatorRipple {
    0% {
      transform: scale(1);
      opacity: 0.7;
    }
    100% {
      transform: scale(1.5);
      opacity: 0;
    }
  }

  /* DM choice buttons */
  .choice-list {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-top: 10px;
  }

  .choice-btn {
    background: linear-gradient(180deg, #fff8ea, #fff2d8);
    border: 1px solid rgba(40, 32, 24, 0.06);
    padding: 8px 12px;
    border-radius: 999px;
    font-size: 0.875rem;
    cursor: pointer;
    transition:
      transform 0.12s ease,
      box-shadow 0.12s ease,
      background 0.12s ease;
  }

  .choice-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 18px rgba(35, 25, 15, 0.12);
  }

  .choice-btn:active {
    transform: translateY(-1px);
  }

  /* primary choice uses warm gold accent rather than purple */
  .choice-btn.primary {
    background: linear-gradient(180deg, #fff4db, #ffedbf);
    border-color: rgba(245, 158, 11, 0.16);
    color: #2b1f00;
  }

  /* Message grouping â€” soften gaps for grouped messages */
  .group + .group {
    margin-top: 8px;
  }

  /* Header styling for the adventure chat */
  .adventure-header {
    background: linear-gradient(90deg, rgba(107, 70, 193, 0.06), rgba(245, 158, 11, 0.03));
    padding: 14px 18px;
    border-bottom: 1px solid rgba(40, 32, 24, 0.04);
    border-radius: 12px 12px 0 0;
  }

  .api-button {
    background: linear-gradient(180deg, #fff, #f7f3ea);
    border: 1px solid rgba(40, 32, 24, 0.06);
    box-shadow: 0 6px 18px rgba(26, 20, 12, 0.06);
  }

  /* Smooth scroll for landing page */
  html {
    scroll-behavior: smooth;
  }

  /* Landing page gradient text effects */
  .gradient-text {
    background: linear-gradient(135deg, #f59e0b, #0891b2, #6b46c1);
    background-size: 200% 200%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: gradientShift 4s ease infinite;
  }

  @keyframes gradientShift {
    0%,
    100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  /* Parallax scroll effect */
  .parallax {
    transform: translateZ(0);
    will-change: transform;
  }

  /* Campaign hover popup enhancements - removed to allow JS-controlled delay */
  /* .campaign-card.group:hover .hover-popup {
    opacity: 1 !important;
    transform: translate(-50%, -50%) !important;
    pointer-events: auto !important;
    z-index: 20 !important;
  } */

  /* Character card hover popup centering */
  /* .character-card.group:hover .hover-popup {
    opacity: 1 !important;
    transform: translate(-50%, -50%) !important;
    pointer-events: auto !important;
    z-index: 20 !important;
  } */

  /* Race card hover popup centering */
  .race-card.group:hover .hover-popup {
    opacity: 1 !important;
    transform: translate(-50%, -50%) !important;
    pointer-events: auto !important;
    z-index: 20 !important;
  }

  .hover-popup {
    position: absolute !important;
    left: 50% !important;
    top: 50% !important;
    transform: translate(-50%, -50%);
    z-index: 10;
    transition:
      opacity 0.2s ease,
      transform 0.2s ease !important;
    filter: drop-shadow(0 10px 25px rgba(0, 0, 0, 0.2));
  }

  /* Custom scrollbar for hover popup */
  .hover-popup::-webkit-scrollbar {
    width: 6px;
  }

  .hover-popup::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.05);
    border-radius: 3px;
  }

  .hover-popup::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 3px;
    transition: background 0.2s ease;
  }

  .hover-popup::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.3);
  }

  /* Firefox scrollbar support for hover popup */
  .hover-popup {
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.2) rgba(0, 0, 0, 0.05);
  }

  .description-section:empty::before {
    content: 'No description yet. Enter to start your adventure!';
    color: var(--muted-foreground);
    font-style: italic;
  }

  .description-section {
    min-height: 4rem;
  }

  /* Mobile touch support for popup */
  @media (hover: none) and (pointer: coarse) {
    .hover-popup {
      display: none; /* Hide on touch devices, use tap instead */
    }
  }

  /* Custom scrollbar for campaign description */
  .description-section::-webkit-scrollbar {
    width: 6px;
  }

  .description-section::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 3px;
  }

  .description-section::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
    transition: background 0.2s ease;
  }

  .description-section::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
  }

  /* Firefox scrollbar support */
  .description-section {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
  }

  /* Line clamp utilities for text truncation */
  .line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }

  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }

  .line-clamp-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
  }
}
