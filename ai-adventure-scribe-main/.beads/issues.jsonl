{"id":"ai-adventure-scribe-main-1","title":"TMP: verify json","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-15T00:25:31.303022-05:00","updated_at":"2025-11-10T22:26:20.291228-06:00","closed_at":"2025-10-15T00:25:46.398138-05:00"}
{"id":"ai-adventure-scribe-main-10","title":"Increase free tier quota to 30 LLM, 5 image, 10 voice","description":"Update DEFAULT_QUOTAS in server/src/services/ai-usage-service.ts to allow ~15 adventures/day for free tier","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-11-08T00:22:29.907794-06:00","updated_at":"2025-11-10T22:26:20.292516-06:00","closed_at":"2025-11-08T00:34:38.709163-06:00"}
{"id":"ai-adventure-scribe-main-11","title":"Implement graceful memory degradation for free tier","description":"Free tier: extract memories every 3rd turn only. Pro tier: every turn. Modify ai-service.ts memory extraction calls to check user plan and turnCount % 3","status":"open","priority":0,"issue_type":"feature","created_at":"2025-11-08T00:22:29.997399-06:00","updated_at":"2025-11-10T22:26:20.292815-06:00","dependencies":[{"issue_id":"ai-adventure-scribe-main-11","depends_on_id":"ai-adventure-scribe-main-13","type":"blocks","created_at":"2025-11-08T00:22:45.161752-06:00","created_by":"rob"},{"issue_id":"ai-adventure-scribe-main-11","depends_on_id":"ai-adventure-scribe-main-14","type":"blocks","created_at":"2025-11-08T00:22:45.230345-06:00","created_by":"rob"}]}
{"id":"ai-adventure-scribe-main-12","title":"Add visible quota display UI component","description":"Display 'ðŸŽ² Your Daily Adventure Credits: X/30 remaining' in game session UI. Show upgrade CTA when quota \u003c 5. Fetch from quota endpoint.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-08T00:22:30.071985-06:00","updated_at":"2025-11-10T22:26:20.293395-06:00","closed_at":"2025-11-08T00:36:22.856087-06:00","dependencies":[{"issue_id":"ai-adventure-scribe-main-12","depends_on_id":"ai-adventure-scribe-main-15","type":"blocks","created_at":"2025-11-08T00:22:45.292582-06:00","created_by":"rob"}]}
{"id":"ai-adventure-scribe-main-13","title":"Investigate: User plan access pattern in ai-service.ts","description":"Find how to access user's plan (free/pro/enterprise) in ai-service.ts context for memory degradation logic","status":"closed","priority":0,"issue_type":"chore","created_at":"2025-11-08T00:22:37.08592-06:00","updated_at":"2025-11-10T22:26:20.293527-06:00","closed_at":"2025-11-08T00:24:40.704415-06:00"}
{"id":"ai-adventure-scribe-main-14","title":"Investigate: turnCount access during AI response","description":"Find where session turnCount is accessible during AI response generation for memory degradation logic","status":"closed","priority":0,"issue_type":"chore","created_at":"2025-11-08T00:22:37.141572-06:00","updated_at":"2025-11-10T22:26:20.29364-06:00","closed_at":"2025-11-08T00:25:16.01143-06:00"}
{"id":"ai-adventure-scribe-main-15","title":"Investigate: Quota endpoint status and UI location","description":"Check if GET /v1/llm/quota endpoint exists or needs creation. Identify where to place quota UI in game session page.","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-11-08T00:22:37.200871-06:00","updated_at":"2025-11-10T22:26:20.293746-06:00","closed_at":"2025-11-08T00:25:39.881565-06:00"}
{"id":"ai-adventure-scribe-main-16","title":"Fix combat options generation - dynamic options show generic exploration during combat","description":"The /dm/options endpoint generates generic exploration choices during combat instead of combat-specific actions because it doesn't interpret the COMBAT: ACTIVE state","status":"open","priority":0,"issue_type":"bug","created_at":"2025-11-08T01:10:37.466059-06:00","updated_at":"2025-11-10T22:26:20.293834-06:00"}
{"id":"ai-adventure-scribe-main-17","title":"AI not requesting dice rolls - narrates outcomes directly","description":"Investigation shows AI (Gemini) ignores existing dice roll instructions in prompts (both prompts.ts and promptBuilder.ts have XML-tagged roll request sections). AI narrates action outcomes directly instead of requesting player rolls. Roll parsing system exists and works (parseRollRequests), but returns 0 requests because AI text doesn't contain trigger phrases like 'make a Perception check' or 'roll initiative'. Evidence: Logs show 'ðŸŽ² Parsed roll requests from DM text: 0' on every response. Root cause: Gemini defaults to narrative mode despite \u003cdice_rolling\u003e\u003ctitle\u003eCRITICAL: ALWAYS REQUEST DICE ROLLS\u003c/title\u003e instructions being present in XML prompts.","notes":"Root Cause: 1) Parser regression (9d7724b) stripped content before regex - FIXED in aa499ea. 2) Prompts changed to XML tags (da10179) - FIXED by adding bold headers. Both issues resolved. Ready for testing.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-08T09:27:51.417508-06:00","updated_at":"2025-11-10T22:26:20.293928-06:00","closed_at":"2025-11-08T09:44:16.150085-06:00"}
{"id":"ai-adventure-scribe-main-18","title":"Restore ROLL_KEYWORDS array and helper functions","description":"Restored ~214 lines from commit 9d7724b including ROLL_KEYWORDS array with 9 skill mappings (attack, stealth, persuasion, intimidation, investigation, acrobatics, athletics, perception, insight), plus helper functions: isPaymentRequiredError, determineFallbackRoll, formatRollInstruction, serializeRollForBlock, buildPaymentRequiredFallback. File: src/services/ai-service.ts","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-09T22:02:12.672295-06:00","updated_at":"2025-11-10T22:26:20.294031-06:00","closed_at":"2025-11-09T22:02:38.750666-06:00"}
{"id":"ai-adventure-scribe-main-19","title":"Add ROLL_REQUESTS_V1 structured prompt format","description":"Added 90-line prompt section (lines 632-721) instructing AI to output structured JSON in markdown code blocks for dice roll requests. Includes format spec, field requirements, 3 detailed examples (skill check, combat, saving throw), and important notes about code block placement. File: src/services/ai-service.ts","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-09T22:02:12.740546-06:00","updated_at":"2025-11-10T22:26:20.294115-06:00","closed_at":"2025-11-09T22:02:38.821283-06:00","dependencies":[{"issue_id":"ai-adventure-scribe-main-19","depends_on_id":"ai-adventure-scribe-main-18","type":"blocks","created_at":"2025-11-09T22:02:38.49835-06:00","created_by":"rob"}]}
{"id":"ai-adventure-scribe-main-2","title":"Backfill: Baseline image inventory for /public","description":"Inventoried current images under public; counts by type and file list to enable diff after addition.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-10-15T00:28:01.004501-05:00","updated_at":"2025-11-10T22:26:20.294213-06:00","closed_at":"2025-10-15T00:28:01.052704-05:00"}
{"id":"ai-adventure-scribe-main-20","title":"Update parser to extract ROLL_REQUESTS_V1 code blocks","description":"Enhanced parser with PRIORITY 1 code block extraction (confidence 1.0) before falling back to regex patterns. Parses ROLL_REQUESTS_V1 blocks, extracts JSON, converts to ParsedRollRequest objects. If structured data found, returns immediately without regex fallback. File: src/utils/roll-request/parse.ts","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-09T22:02:25.722286-06:00","updated_at":"2025-11-10T22:26:20.294321-06:00","closed_at":"2025-11-09T22:02:38.896156-06:00","dependencies":[{"issue_id":"ai-adventure-scribe-main-20","depends_on_id":"ai-adventure-scribe-main-19","type":"blocks","created_at":"2025-11-09T22:02:38.606793-06:00","created_by":"rob"}]}
{"id":"ai-adventure-scribe-main-21","title":"Add spell attack detection patterns","description":"Added 5 spell attack regex patterns (cast, use/fire/launch spell, ranged/melee spell attack) plus 13 common spell names (fire bolt, ray of frost, eldritch blast, sacred flame, magic missile, etc). Extracts spell name from player text and formats as attack purpose. Confidence: 0.93. File: src/utils/roll-request/parse.ts","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-09T22:02:25.788411-06:00","updated_at":"2025-11-10T22:26:20.294408-06:00","closed_at":"2025-11-09T22:02:38.967829-06:00","dependencies":[{"issue_id":"ai-adventure-scribe-main-21","depends_on_id":"ai-adventure-scribe-main-20","type":"blocks","created_at":"2025-11-09T22:02:38.679101-06:00","created_by":"rob"}]}
{"id":"ai-adventure-scribe-main-22","title":"Fix AI DM extra response before dice roll completes","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-09T23:18:27.112831-06:00","updated_at":"2025-11-10T22:26:20.294504-06:00","closed_at":"2025-11-09T23:18:31.721784-06:00"}
{"id":"ai-adventure-scribe-main-23","title":"Fix AI narrating outcomes before requesting dice rolls","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-10T00:44:49.169566-06:00","updated_at":"2025-11-10T22:26:20.294585-06:00","closed_at":"2025-11-10T00:47:01.35453-06:00"}
{"id":"ai-adventure-scribe-main-24","title":"Fix AI responding before dice roll - remove narrative before rolls","description":"Modify AI prompt to send ONLY roll requests with no narrative, and hide empty message bubbles in UI","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-10T01:12:55.680814-06:00","updated_at":"2025-11-10T22:26:20.294665-06:00","closed_at":"2025-11-10T01:17:37.079752-06:00"}
{"id":"ai-adventure-scribe-main-25","title":"Fix code block removal in removeRollRequestsFromMessage","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-10T21:12:35.430716-06:00","updated_at":"2025-11-10T22:26:20.294761-06:00","closed_at":"2025-11-10T21:13:00.972188-06:00"}
{"id":"ai-adventure-scribe-main-26","title":"Implement batched dice rolls with enhanced formatting","description":"Batch multiple dice rolls from same AI request into one message with enhanced formatting. Include roll type, natural roll, modifiers, DC/AC, success indicators, and critical detection. Optimized for both human readability and AI comprehension.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-10T22:50:56.584476-06:00","updated_at":"2025-11-10T22:56:28.965272-06:00","closed_at":"2025-11-10T22:56:28.965272-06:00"}
{"id":"ai-adventure-scribe-main-27","title":"Fix ESM/CommonJS compatibility issues","description":"Comprehensive fix for camelcase and other module import errors causing app crashes","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-17T22:53:56.649025-06:00","updated_at":"2025-11-17T22:56:28.899927-06:00","closed_at":"2025-11-17T22:56:28.899927-06:00"}
{"id":"ai-adventure-scribe-main-28","title":"Fix decamelize module import error","description":"Add decamelize to package overrides and vite config","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-18T00:18:41.648772-06:00","updated_at":"2025-11-18T00:19:21.990477-06:00","closed_at":"2025-11-18T00:19:21.990477-06:00"}
{"id":"ai-adventure-scribe-main-29","title":"Set up semantic versioning (commitlint, husky, standard-version)","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-28T22:21:32.552376-06:00","updated_at":"2025-11-28T22:30:05.438695-06:00","closed_at":"2025-11-28T22:30:05.438695-06:00"}
{"id":"ai-adventure-scribe-main-3","title":"Feature: Integrate class card backgrounds","description":"Added backgroundImage to CharacterClass; set class backgrounds; rendered on ClassSelection cards.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-10-15T00:28:01.063965-05:00","updated_at":"2025-11-10T22:26:20.294891-06:00","closed_at":"2025-10-15T00:28:01.086784-05:00"}
{"id":"ai-adventure-scribe-main-30","title":"Create internal blog API for automated release posts","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T22:21:36.647003-06:00","updated_at":"2025-11-28T22:40:25.376396-06:00","closed_at":"2025-11-28T22:40:25.376396-06:00"}
{"id":"ai-adventure-scribe-main-31","title":"Create GitHub Actions release workflow","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T22:21:39.32895-06:00","updated_at":"2025-11-28T22:40:35.342222-06:00","closed_at":"2025-11-28T22:40:35.342222-06:00"}
{"id":"ai-adventure-scribe-main-32","title":"Configure Vercel for blog.infiniterealms.app subdomain","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T22:21:41.339858-06:00","updated_at":"2025-11-28T22:40:39.897156-06:00","closed_at":"2025-11-28T22:40:39.897156-06:00"}
{"id":"ai-adventure-scribe-main-4","title":"Feature: Integrate subrace card backgrounds and rendering","description":"Added backgroundImage to Subrace; set for dwarf/elf/gnome/halfling/human/elementalborn; rendered in RaceSelection UI.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-10-15T00:28:01.097169-05:00","updated_at":"2025-11-10T22:26:20.295027-06:00","closed_at":"2025-10-15T00:28:01.128655-05:00"}
{"id":"ai-adventure-scribe-main-5","title":"Feature: Map campaign genre backgrounds","description":"Updated GenreSelection to use new Traditional/Dark/High Fantasy background images.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-15T00:28:01.139102-05:00","updated_at":"2025-11-10T22:26:20.295132-06:00","closed_at":"2025-10-15T00:28:01.163338-05:00"}
{"id":"ai-adventure-scribe-main-6","title":"Chore: Remove duplicate lizardfolk card image","description":"Removed /public/lizardfolkclass-card-background.png; kept in-use lizardfolk-class-card-background.png.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-10-15T00:28:01.211356-05:00","updated_at":"2025-11-10T22:26:20.295224-06:00","closed_at":"2025-10-15T00:28:01.232865-05:00"}
{"id":"ai-adventure-scribe-main-7","title":"Tech: Extend types for backgroundImage fields","description":"Extended types in src/types/character.ts for CharacterClass and Subrace backgroundImage fields.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-15T00:29:55.703159-05:00","updated_at":"2025-11-10T22:26:20.295303-06:00","closed_at":"2025-10-15T00:29:55.723229-05:00"}
{"id":"ai-adventure-scribe-main-8","title":"UX: Improve text contrast on image-backed cards","description":"Strengthened overlays and badge styles on genre, race, and sub-race cards for readability.","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-10-15T00:29:55.734396-05:00","updated_at":"2025-11-10T22:26:20.29538-06:00","closed_at":"2025-10-15T00:29:55.757326-05:00"}
{"id":"ai-adventure-scribe-main-9","title":"UX: Overlay strength follow-up and review","description":"Audit across devices/browsers; tune overlay opacity and text shadows wherever needed.","status":"open","priority":3,"issue_type":"task","created_at":"2025-10-15T00:29:55.768345-05:00","updated_at":"2025-11-10T22:26:20.295466-06:00"}
{"id":"ai-adventure-scribe-main-33","title":"Fix 402 Payment Required - Separate user vs system quota tracking","description":"Server quota is 30/day but memories/world building burn through it. Add llm_system quota type for background tasks.","status":"closed","closed_at":"2025-11-30T12:30:00.000000-06:00","priority":0,"issue_type":"bug","created_at":"2025-11-30T12:00:00.000000-06:00","updated_at":"2025-11-30T12:00:00.000000-06:00"}
{"id":"ai-adventure-scribe-main-34","title":"Implement XML-tagged DM responses for memories/world updates","description":"Bundle memories and world updates in single DM response using XML tags to reduce API calls from 5+ to 1.","status":"closed","closed_at":"2025-11-30T13:00:00.000000-06:00","priority":0,"issue_type":"feature","created_at":"2025-11-30T12:00:00.000000-06:00","updated_at":"2025-11-30T12:00:00.000000-06:00","dependencies":[{"issue_id":"ai-adventure-scribe-main-34","depends_on_id":"ai-adventure-scribe-main-33","type":"blocks","created_at":"2025-11-30T12:00:00.000000-06:00","created_by":"claude"}]}
{"id":"ai-adventure-scribe-main-35","title":"Add batching fallback for XML parsing failures","description":"If XML tags not found, batch extract memories every 5 turns and world updates every 10 turns.","status":"closed","closed_at":"2025-11-30T13:15:00.000000-06:00","priority":1,"issue_type":"feature","created_at":"2025-11-30T12:00:00.000000-06:00","updated_at":"2025-11-30T12:00:00.000000-06:00","dependencies":[{"issue_id":"ai-adventure-scribe-main-35","depends_on_id":"ai-adventure-scribe-main-34","type":"blocks","created_at":"2025-11-30T12:00:00.000000-06:00","created_by":"claude"}]}
{"id":"ai-adventure-scribe-main-36","title":"Verify provider prioritization - free tiers first","description":"Ensure Gemini free and OpenRouter free are used before paid models.","status":"closed","closed_at":"2025-11-30T13:15:00.000000-06:00","priority":1,"issue_type":"chore","created_at":"2025-11-30T12:00:00.000000-06:00","updated_at":"2025-11-30T12:00:00.000000-06:00","dependencies":[{"issue_id":"ai-adventure-scribe-main-36","depends_on_id":"ai-adventure-scribe-main-33","type":"blocks","created_at":"2025-11-30T12:00:00.000000-06:00","created_by":"claude"}]}
{"id":"ai-adventure-scribe-main-37","title":"[FIXED] API efficiency - reduced calls from 5-10 to ~1.3 per message","description":"Fixed 402 Payment Required errors. Implemented: 1) Separate quota tracking (llm vs llm_system), 2) XML-tagged DM responses for inline memory/world extraction, 3) Fallback batching. Result: 4 API calls for 3 messages vs previous 15-30 calls.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-30T05:30:00.000000-06:00","updated_at":"2025-11-30T05:30:00.000000-06:00","closed_at":"2025-11-30T05:30:00.000000-06:00"}
